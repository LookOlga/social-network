{"version":3,"sources":["components/hoc/withAuthRedirect.js","assets/images/users/user_icon.png","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","components/common/Paginator/Paginator.js","components/Users/User.js","components/Users/Users.js","redux/usersSelectors.js","components/Users/UsersContainer.js"],"names":["mapStateToPropsForRedirect","state","isAuth","auth","withAuthRedirect","Component","RedirectComponent","this","props","to","React","connect","_slicedToArray","arr","i","Array","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","unsupportedIterableToArray","TypeError","Paginator","totalUsersCount","pageSize","currentPage","onPageChanged","portionSize","pagesCount","Math","ceil","pages","portionCount","useState","portionNumber","setPortionNumber","leftPortionBorder","rightPortionBorder","className","onClick","filter","p","map","we","User","user","isFollowingProgress","followUser","unfollowUser","id","src","photos","small","userIcon","alt","followed","disabled","some","name","status","Users","users","getUsersList","usersPage","getPageSize","getTotalUsersCount","getCurrentPage","getIsFetching","isFetching","getIsFollowingProgress","UsersContainerAPI","pageNumber","getUsers","Preloader","toggleIsFollowingProgress","UsersContainer","compose","follow","unfollow","setCurrentPage"],"mappings":"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","file":"static/js/6.62f6bf02.chunk.js","sourcesContent":["import React from \"react\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\n\r\n\r\nconst mapStateToPropsForRedirect = (state) => {\r\n    return {\r\n        isAuth: state.auth.isAuth\r\n    }\r\n}\r\n\r\nexport const withAuthRedirect = (Component) => {\r\n    class RedirectComponent extends React.Component {\r\n        render() {\r\n            if(!this.props.isAuth) return <Redirect to={\"/login\"}/>\r\n\r\n            return <Component {...this.props}/>\r\n        }\r\n    }\r\n\r\n    const ConnectedAuthRedirectComponent  = connect(mapStateToPropsForRedirect)(RedirectComponent);\r\n\r\n    return ConnectedAuthRedirectComponent;\r\n}","export default __webpack_public_path__ + \"static/media/user_icon.6243cb6f.png\";","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React, {useState} from \"react\";\r\nimport './paginator.css';\r\n\r\n\r\n\r\nconst Paginator = (props) => {\r\n    const {totalUsersCount, pageSize, currentPage, onPageChanged, portionSize = 10} = props;\r\n    const pagesCount = Math.ceil(totalUsersCount / pageSize);\r\n\r\n    const pages = [];\r\n    for (let i = 1; i <= pagesCount; i++) {\r\n        pages.push(i);\r\n    }\r\n\r\n    const portionCount = Math.ceil(pagesCount / portionSize);\r\n    const [portionNumber, setPortionNumber] = useState(1);\r\n    const leftPortionBorder = (portionNumber - 1) * pageSize + 1;\r\n    const rightPortionBorder = portionNumber  * pageSize;\r\n    return (\r\n        <div className=\"pagination\">\r\n            {portionNumber > 1 && <button className=\"pagination__btn pagination__btn--prev\" onClick={() => {setPortionNumber(portionNumber - 1)}}>&larr; prev</button>}\r\n            <div className=\"pagination__pages-number\">{pages\r\n                .filter(p => p >= leftPortionBorder && p <= rightPortionBorder)\r\n                .map(p => {\r\n                    return (\r\n                        <span onClick={(we) => {\r\n                            onPageChanged(p)\r\n                        }} className={`pagination__btn\" ${currentPage === p ? \"active-page\" : \"\"}`}>{p}</span>\r\n                    )\r\n                })}</div>\r\n            {portionCount > portionNumber && <button className=\"pagination__btn pagination__btn--next\" onClick={() => {setPortionNumber(portionNumber + 1)}}>next &rarr;</button>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Paginator;","import React from \"react\";\r\nimport userIcon from \"../../assets/images/users/user_icon.png\";\r\n\r\nimport './users.css';\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\n\r\n\r\nconst User = (props) => {\r\n    const {user, isFollowingProgress, followUser, unfollowUser} = props;\r\n    return (\r\n        <div className=\"user__item\">\r\n            <div className=\"user__avatar\">\r\n                <div className=\"user__photo\">\r\n                    <NavLink to={'/profile/' + user.id}>\r\n                        <img src={user.photos.small !== null ? user.photos.small : userIcon} alt=\"\"/>\r\n                    </NavLink>\r\n                </div>\r\n                {user.followed ?\r\n                    <button disabled={isFollowingProgress.some(id => id === user.id)}\r\n                            onClick={() => {\r\n                                unfollowUser(user.id);\r\n                            }}\r\n                            className=\"user__btn user__btn--unfollow\">\r\n                        unfollow\r\n                    </button> :\r\n                    <button disabled={isFollowingProgress.some(id => id === user.id)}\r\n                            onClick={() => {\r\n                                followUser(user.id);\r\n                            }}\r\n                            className=\"user__btn user__btn--follow\">\r\n                        follow\r\n                    </button>}\r\n            </div>\r\n            <div className=\"user__info\">\r\n                <div className=\"user__info-left\">\r\n                    <div className=\"user__name\">{user.name}</div>\r\n                    <div className=\"user__status\">{user.status}</div>\r\n                </div>\r\n                {/*<div className=\"user__info-right\">*/}\r\n                {/*    <div className=\"user__country\">{user.location.country}</div>*/}\r\n                {/*    <div className=\"user__city\">{user.location.city}</div>*/}\r\n                {/*</div>*/}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default User;","import React from \"react\";\r\n\r\nimport './users.css';\r\nimport Paginator from \"../common/Paginator/Paginator\";\r\nimport User from \"./User\";\r\n\r\n\r\nconst Users = (props) => {\r\n    return (\r\n        <div className=\"user__page\">\r\n            <div className=\"user__list\">\r\n                {props.users.map(user =>\r\n                    <User\r\n                        user={user}\r\n                        key={user.id}\r\n                        isFollowingProgress={props.isFollowingProgress}\r\n                        followUser={props.followUser}\r\n                        unfollowUser={props.unfollowUser}/>)}\r\n            </div>\r\n            <Paginator\r\n                totalUsersCount={props.totalUsersCount}\r\n                pageSize={props.pageSize}\r\n                currentPage={props.currentPage}\r\n                onPageChanged={props.onPageChanged}/>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default Users;","export const getUsersList = (state) => {\r\n    return state.usersPage.users;\r\n}\r\n\r\nexport const getPageSize = (state) => {\r\n    return state.usersPage.pageSize;\r\n}\r\n\r\nexport const getTotalUsersCount = (state) => {\r\n    return state.usersPage.totalUsersCount;\r\n}\r\n\r\nexport const getCurrentPage = (state) => {\r\n    return state.usersPage.currentPage;\r\n}\r\n\r\nexport const getIsFetching = (state) => {\r\n    return state.usersPage.isFetching;\r\n}\r\n\r\nexport const getIsFollowingProgress = (state) => {\r\n    return state.usersPage.isFollowingProgress;\r\n}","import React from \"react\";\r\nimport {connect} from \"react-redux\";\r\n\r\nimport {\r\n    follow,\r\n    unfollow,\r\n    setCurrentPage,\r\n    toggleIsFollowingProgress,\r\n    getUsers, followUser, unfollowUser\r\n} from \"../../redux/usersReducer\";\r\nimport Users from \"./Users\";\r\nimport Preloader from \"../common/Preloader/Preloader\";\r\nimport {withAuthRedirect} from \"../hoc/withAuthRedirect\";\r\nimport {compose} from \"redux\";\r\nimport {\r\n    getCurrentPage,\r\n    getIsFetching,\r\n    getIsFollowingProgress, getPageSize,\r\n    getTotalUsersCount,\r\n    getUsersList\r\n} from \"../../redux/usersSelectors\";\r\n\r\nclass UsersContainerAPI extends React.Component {\r\n\r\n    componentDidMount() {\r\n        const {getUsers, currentPage, pageSize} = this.props;\r\n        getUsers(currentPage, pageSize);\r\n    }\r\n\r\n    onPageChanged = (pageNumber) => {\r\n        const {getUsers, pageSize} = this.props;\r\n        getUsers(pageNumber, pageSize);\r\n    }\r\n\r\n    render() {\r\n        return <>\r\n            {this.props.isFetching ? <Preloader/> : null}\r\n            <Users totalUsersCount={this.props.totalUsersCount}\r\n                   pageSize={this.props.pageSize}\r\n                   currentPage={this.props.currentPage}\r\n                   onPageChanged={this.onPageChanged}\r\n                   users={this.props.users}\r\n                   toggleIsFollowingProgress={this.props.toggleIsFollowingProgress}\r\n                   isFollowingProgress={this.props.isFollowingProgress}\r\n                   followUser={this.props.followUser}\r\n                   unfollowUser={this.props.unfollowUser}\r\n            />\r\n        </>\r\n\r\n    }\r\n}\r\n\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        users: getUsersList(state),\r\n        pageSize: getPageSize(state),\r\n        totalUsersCount: getTotalUsersCount(state),\r\n        currentPage: getCurrentPage(state),\r\n        isFetching: getIsFetching(state),\r\n        isFollowingProgress: getIsFollowingProgress(state)\r\n    }\r\n}\r\n\r\n// let mapDispatchToProps = (dispatch) => {\r\n//     return {\r\n//         follow: (userId) => {\r\n//             dispatch(followActionCreator(userId));\r\n//         },\r\n//         unfollow: (userId) => {\r\n//             dispatch(unfollowActionCreator(userId));\r\n//         },\r\n//         setUsers: (users) => {\r\n//             dispatch(setUsersActionCreator(users));\r\n//         },\r\n//         setCurrentPage: (currentPage) => {\r\n//             dispatch(setCurrentPageActionCreator(currentPage));\r\n//         },\r\n//         setUsersTotalCount: (totalUsersCount) => {\r\n//             dispatch(setTotalUsersCountActionCreator(totalUsersCount));\r\n//         },\r\n//         toggleIsFetching: (isFetching) => {\r\n//             dispatch(toggleIsFetchingActionCreator(isFetching));\r\n//         }\r\n//     }\r\n// }\r\n\r\n// const AuthRedirectComponent = withAuthRedirect(UsersContainerAPI);\r\n// const UsersContainer = connect(mapStateToProps,\r\n//     {\r\n//         follow,\r\n//         unfollow,\r\n//         setCurrentPage,\r\n//         toggleIsFollowingProgress,\r\n//         getUsers,\r\n//         followUser,\r\n//         unfollowUser\r\n//     }\r\n//     )(AuthRedirectComponent);\r\n\r\nconst UsersContainer = compose(\r\n    connect(mapStateToProps,\r\n        {\r\n            follow, unfollow, setCurrentPage,\r\n            toggleIsFollowingProgress, getUsers, followUser, unfollowUser\r\n        }),\r\n    withAuthRedirect\r\n)(UsersContainerAPI)\r\n\r\nexport default UsersContainer;"],"sourceRoot":""}